# Type 權重分類使用指南

## 📋 概述

Type 權重用於根據店舖的**客源特性**調整 Safety Stock 需求。在現有的 Class（舖類級別）和 Size（貨場面積）權重之外，Type 提供第三層物理分類。

### Type 分類定義

| Type | 名稱 | 描述 | 典型店舖 | 權重值 |
|------|------|------|---------|---------|
| **T** | 遊客區 | Tourist - 主要服務遊客的店舖 | 機場、中環、尖沙咀等旅遊熱點 | **1.2** ✅ |
| **M** | 混合型 | Mixed - 遊客與本地客源混合 | 沙田、屯門、荃灣等新興商業區 | **1.0** ◆ 基準 |
| **L** | 本地型 | Local - 主要服務本地客源 | 工業區、社區型購物廣場 | **0.9** 📍 |

## 🔄 計算公式

```
Safety Stock = 基礎值 + (Class權重 × Size權重 × Type權重 × 區域係數)
```

### 公式參數說明

- **基礎值**：2（所有店舖的基礎庫存數）
- **Class權重**：A級=3.2，B級=2.4，C級=1.8，D級=1.5
- **Size權重**：XL=3.8，L=3.0，M=2.2，S=1.6，XS=1.3
- **Type權重**：T=1.2，M=1.0，L=0.9
- **區域係數**：HK=1.0，MO=1.33

---

## 📊 完整對照表（基於平衡型模板）

### 香港地區 (HK) - 區域係數 1.0

#### A級店舖
| Size | T (1.2) | M (1.0) | L (0.9) |
|------|---------|---------|---------|
| XL | 9 | 8 | 7 |
| L | 9 | 8 | 7 |
| M | 8 | 7 | 6 |
| S | 7 | 6 | 5 |
| XS | 7 | 6 | 5 |

#### B級店舖
| Size | T (1.2) | M (1.0) | L (0.9) |
|------|---------|---------|---------|
| XL | 8 | 7 | 6 |
| L | 8 | 7 | 6 |
| M | 7 | 6 | 5 |
| S | 6 | 5 | 5 |
| XS | 6 | 5 | 5 |

#### C級店舖
| Size | T (1.2) | M (1.0) | L (0.9) |
|------|---------|---------|---------|
| XL | 7 | 6 | 5 |
| L | 7 | 6 | 5 |
| M | 6 | 5 | 5 |
| S | 5 | 5 | 4 |
| XS | 5 | 5 | 4 |

#### D級店舖
| Size | T (1.2) | M (1.0) | L (0.9) |
|------|---------|---------|---------|
| XL | 7 | 6 | 5 |
| L | 7 | 6 | 5 |
| M | 6 | 5 | 5 |
| S | 5 | 5 | 4 |
| XS | 5 | 5 | 4 |

### 澳門地區 (MO) - 區域係數 1.33

#### A級店舖
| Size | T (1.2) | M (1.0) | L (0.9) |
|------|---------|---------|---------|
| XL | 10 | 9 | 8 |
| L | 10 | 9 | 8 |
| M | 9 | 8 | 7 |
| S | 8 | 7 | 6 |
| XS | 8 | 7 | 6 |

#### B級店舖
| Size | T (1.2) | M (1.0) | L (0.9) |
|------|---------|---------|---------|
| XL | 9 | 8 | 7 |
| L | 9 | 8 | 7 |
| M | 8 | 7 | 6 |
| S | 7 | 6 | 6 |
| XS | 7 | 6 | 6 |

#### C級店舖
| Size | T (1.2) | M (1.0) | L (0.9) |
|------|---------|---------|---------|
| XL | 8 | 7 | 6 |
| L | 8 | 7 | 6 |
| M | 7 | 6 | 6 |
| S | 6 | 5 | 5 |
| XS | 6 | 5 | 5 |

#### D級店舖
| Size | T (1.2) | M (1.0) | L (0.9) |
|------|---------|---------|---------|
| XL | 8 | 7 | 6 |
| L | 8 | 7 | 6 |
| M | 7 | 6 | 6 |
| S | 6 | 5 | 5 |
| XS | 6 | 5 | 5 |

---

## 🎯 應用場景範例

### 範例 1：遊客區大型 A 級店舖
- **店舖特徵**：HA15（中環），A級，大型（L），遊客區（T），香港
- **權重計算**：2 + (3.2 × 3.0 × 1.2 × 1.0) = 2 + 11.52 ≈ **14**
- **業務意義**：遊客消費頻率高，需要較多庫存應對突發需求

### 範例 2：混合型中型 B 級店舖
- **店舖特徵**：HB12（黃埔），B級，中型（M），混合型（M），香港
- **權重計算**：2 + (2.4 × 2.2 × 1.0 × 1.0) = 2 + 5.28 ≈ **7**
- **業務意義**：客源均勻分佈，需要適度庫存

### 範例 3：本地客源小型 C 級店舖
- **店舖特徵**：HA40（山頂），C級，小型（S），本地型（L），香港
- **權重計算**：2 + (1.8 × 1.6 × 0.9 × 1.0) = 2 + 2.59 ≈ **5**
- **業務意義**：本地客源相對穩定，可以降低庫存成本

---

## 📈 權重範本對比

### 目前設定（標準型 - 推薦）
- **特點**：接近現有對照表的配置，Class權重(3.2→2.4→1.8→1.5)，Size權重(XL=3.8→XS=1.3)，Type差異適中（1.2 → 1.0 → 0.9）
- **適用場景**：大多數常規經營情況，產生 Safety Stock 值範圍 5-25

### 平衡型
- **特點**：中等庫存配置，權重略低於標準型，Type差異適中（1.15 → 1.0 → 0.92）
- **適用場景**：希望在庫存成本和服務水平之間取得平衡

### 保守型
- **特點**：較低的庫存配置，所有權重顯著降低，Type差異最小（1.08 → 1.0 → 0.95）
- **適用場景**：庫存成本高，銷售較穩定，Safety Stock 值範圍 3-12

### 積極型
- **特點**：較高的庫存配置，所有權重顯著提高，Type差異明顯（1.25 → 1.0 → 0.85）
- **適用場景**：銷售波動大，防缺貨優先，Safety Stock 值範圍 8-35

---

## 💾 在系統中應用

### UI 位置
在「權重快速設定」面板中，你會看到：

```
🏪 Type 權重 - 店舖類型 (T:M:L)
    T - 遊客區    [1.2]
    M - 混合型    [1.0]
    L - 本地客源  [0.9]
```

### 調整步驟
1. 打開「⚙️ 權重快速設定」面板
2. 找到「🏪 Type 權重」部分
3. 根據業務需要調整各 Type 的權重值
4. 點擊「👁️ 預覽結果」查看對照表變化
5. 點擊「🚀 套用權重計算」生成新的 Safety Stock
6. 點擊「套用到選擇店舖」確認應用

---

## 🎨 Type 與店舖的對應關係

根據 stores-template.csv，查看現有店舖的 Type 分配：

### T（遊客區）店舖示例
- HA33, HA39, HA40, HA42, HB01, HB10 等（機場、中環、旺角等熱點）

### M（混合型）店舖示例
- HA02, HA06, HA15, HA30, HA44 等（社區型商業區）

### L（本地型）店舖示例
- HA19, HA20, HA21 等（住宅區、工業區）

---

## ⚙️ 進階調整建議

### 如果遊客區銷售波動大
→ 提高 T 的權重，例如 1.2 → 1.3（積極型模板已設為1.25）

### 如果本地客源較穩定
→ 降低 L 的權重，例如 0.9 → 0.85（積極型模板已設為0.85）

### 如果想減少庫存總量而保持結構
→ 降低基礎值（例如 2 → 1）同時微調 Class 和 Size 權重，或直接使用保守型模板

---

## 📞 常見問題

**Q: Type 權重如何與 Class 和 Size 協同？**
A: 它們呈乘法相乘關係。Type 是第三層分類，用於細化權重計算，不會覆蓋 Class 或 Size 的影響。

**Q: 能否改變 M（混合型）的基準值？**
A: 可以，但建議保持 M = 1.0 作為 100% 基準，這樣 T > 1.0 表示偏高，L < 1.0 表示偏低，便於理解。

**Q: 如何快速切換權重方案？**
A: 在「快速模板」中選擇「目前設定」、「平衡權重」、「保守型」或「積極型」，系統會自動套用所有權重（含 Type）。

---

## 📝 更新歷史

- **v2.0** - 重新設計權重模板，統一調整所有權重值以符合新邏輯
- **計算公式**：Safety Stock = 基礎值(2) + (Class權重 × Size權重 × Type權重 × 區域係數)
- **權重範圍**：
  - Class: A=3.2, B=2.4, C=1.8, D=1.5
  - Size: XL=3.8, L=3.0, M=2.2, S=1.6, XS=1.3  
  - Type: T=1.2, M=1.0, L=0.9
- **模板類型**：保守型、平衡型、標準型、積極型，覆蓋 Safety Stock 值範圍 3-35

---

**最後更新**：2026 年 2 月 10 日
